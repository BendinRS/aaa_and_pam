# Домашняя работа "PAM"

### Запретить всем пользователям, кроме группы admin логин в выходные (суббота и воскресенье), без учета праздников

+ Создаем трех пользователей:  
● ”day” - имеет удаленный доступ каждый день с 8 до 20;  
● “night” - с 20 до 8;  
● “friday” - в любое время, если сегодня пятница.  

![Альтернативный текст](https://i.ibb.co/SB5k0wc/1234.png)

+ Стенд готов к выполнению ЛР

<details>
  <summary>Про PAM</summary>
  
  PAM (Pluggable Authentication Modules - подключаемые модули
аутентификации) - это набор библиотек, которые позволяют
интегрировать различные методы аутентификации в виде единого
API, что позволяет предоставить единые механизмы для управления,
встраивания прикладных программ в процесс аутентификации.  
PAM решает следующие задачи:  
Authentication - Аутентификация, идентификация, процесс
подтверждения пользователем своей “подлинности”, ввод логина
и пароля;  
Authorization - Авторизация, процесс наделения пользователя
правами (предоставления доступа к каким-либо объектам);  
Accounting - Запись информации о произошедших событиях.  
  
</details>

### Реализуем несколько способов решения задачи

<details>
  <summary>Модуль pam_time</summary>
  
  + Настройки данного модуля хранятся в файле /etc/security/time.conf
  + Добавим в конец файла строки:  
    ```
    *;*;day;Al0800-2000  
    *;*;night;!Al0800-2000  
    *;*;friday;Fr  
    ```
    Разные параметры отделяются символом ";". Разберем первую
строку:

```
- “*” сервис, к которому применяется правило
- "*" имя терминала, к которому применяется правило
- имя пользователя (day), для которого данное правило будет действовать
- время (Al0800-2000), когда правило носит разрешающий характер
```
+ Теперь настроим PAM, так как по-умолчанию данный модуль не
подключен. Для этого приведем файл /etc/pam.d/sshd к виду:

```
account     required    pam_nologin.so
account     required    pam_time.so
```

+ Проверяем в отдельном терминале доступ к
серверу по ssh для созданных пользователей  

!!! В методичке было указано настроить /etc/pam.d/sshd
Не отрабатывало, пока не настроил - **/etc/pam.d/login**

У-успех
![Альтернативный текст](https://i.ibb.co/DRMZpBS/1234.png)
</details>
